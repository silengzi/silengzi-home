### 浏览器起始页设计文档（v0.1）

- **目标**: 提供一个快速、优雅、可定制的浏览器起始页，兼顾效率、美学与隐私。
- **定位**: 极简+高效，偏个人效率与每日信息概览。

## 1. 用户与场景
- **用户画像（程序员 / 技术极客）**
  - 以键盘为主的重度用户，偏好命令式操作与可编排工作流。
  - 重视隐私与可控性，倾向本地优先、可导出、可自托管。
  - 偏好极简但高信息密度的界面，对主题与等宽字体、终端风格友好。
- **关键场景**
  - 打开新标签页后，使用快捷键/命令快速跳转或执行动作。
  - 统一搜索框支持前缀与别名（如 g:, gh:, so:, npm:），一键直达。
  - 仪表盘式信息总览：天气、CI 状态、GitHub 通知、日程、技术资讯 RSS。
  - 自定义布局与脚本化扩展（用户定义命令、别名、卡片数据源）。

## 2. 功能范围（MVP → 迭代）
- **MVP**
  - 聚合搜索框（可切换引擎：Google、Bing、百度、自定义）
  - **智能快捷导航系统**（重点功能）
    - 多层级分类管理（文件夹式结构，支持嵌套）
    - 智能标签导入（从浏览器书签自动同步）
    - 高级搜索与过滤（按分类、标签、使用频率筛选）
    - 批量操作（多选、批量编辑、批量导入导出）
    - 使用统计与智能排序（最近使用、最常访问、手动置顶）
  - 今日信息卡片：时间/问候语、天气（定位/城市选择）、每日一句
  - 主题与壁纸：浅/深色、渐变/纯色/本地/在线壁纸，模糊与透明度
  - 可配置布局（网格/列宽/卡片显示与顺序）
  - 本地持久化（本地优先，可选云同步）
  - 快速启动器/命令面板（全局快捷键呼出，支持别名与前缀）
- **可选增强（后续）**
  - 待办与番茄钟（轻量）
  - 日历与日程（Google/Outlook/本地ICS）
  - RSS/新闻简览（可选源）
  - 多设备同步（登录/匿名同步码）
  - PWA、离线能力、简易插件生态

## 3. 信息架构与导航
- **主结构**
  - 顶部/中心：搜索
  - 主体：**智能快捷导航系统**（核心区域）
    - 分类侧边栏（可折叠，支持多级嵌套）
    - 标签网格区（响应式布局，支持多种视图模式）
    - 快速过滤器（最近使用、最常访问、收藏夹）
  - 辅助卡片区（天气、名言、待办…）
  - 底部/顶部：状态栏（日期、天气摘要、设置入口）

## 3.1 智能快捷导航系统设计
- **分类管理**
  - 树形结构侧边栏（支持拖拽调整层级）
  - 智能分类建议（基于URL域名、标签自动分组）
  - 自定义分类图标与颜色标识
  - 分类统计（显示每个分类下的链接数量）
- **标签展示**
  - 多种视图模式：网格视图、列表视图、紧凑视图
  - 智能排序：最近使用、访问频率、手动置顶、字母顺序
  - 标签预览：悬浮显示网站截图、描述、最后访问时间
  - 批量操作：多选、批量编辑、批量移动、批量删除
- **搜索与过滤**
  - 实时搜索（支持模糊匹配、标签搜索）
  - 高级过滤器（按分类、访问时间、标签类型）
  - 快速筛选按钮（工作、学习、娱乐、工具等）
- **导入与同步**
  - 浏览器书签一键导入（Chrome、Firefox、Edge、Safari）
  - **HTML书签文件导入**（支持浏览器导出的bookmarks.html格式）
  - 智能去重与分类建议
  - 增量同步（检测书签变化并提示更新）
  - 导入预览与确认机制

- **设置面板**
  - 外观（主题/壁纸/字体/密度/动画）
  - 布局（网格宽度/卡片顺序/显示隐藏）
  - **快捷导航**（分类管理/视图设置/排序规则/导入设置）
    - HTML书签导入（文件选择、解析选项、分类映射规则）
  - 搜索（默认引擎/快捷语法/建议）
  - 数据（导入导出/备份/同步）
  - 配置（从 `.startpage.json`/YAML 读取别名、卡片配置、主题变量）
  - 集成（天气API、日历、RSS）
  - 高级（隐私选项、性能开关、无干扰模式）

## 4. 关键交互与UX
- **搜索**
  - 输入即建议（历史、书签、预设命令）
  - 前缀切换引擎（如 g:、b:、zh:）
  - 键盘导航（↑↓选择、Enter打开、Ctrl+Enter新标签）
  - 命令模式（> 前缀触发），支持执行：打开链接、运行脚本、切换主题等
- **智能快捷导航交互**
  - **分类操作**
    - 侧边栏拖拽：拖拽分类调整顺序，拖拽到其他分类创建嵌套
    - 右键菜单：新建分类、重命名、删除、设置图标、批量操作
    - 键盘快捷键：Ctrl+N新建分类，F2重命名，Delete删除
  - **标签操作**
    - 多选模式：Ctrl+点击多选，Shift+点击范围选择，Ctrl+A全选
    - 拖拽排序：在分类内拖拽调整顺序，跨分类拖拽移动
    - 批量编辑：选中多个标签后批量修改分类、标签、描述
    - 快速操作：悬浮显示快速操作按钮（编辑、删除、置顶）
  - **视图切换**
    - 快捷键：Ctrl+1网格视图，Ctrl+2列表视图，Ctrl+3紧凑视图
    - 工具栏切换：视图模式、排序方式、过滤器快速切换
    - 响应式布局：根据屏幕尺寸自动调整列数和卡片大小
  - **搜索与过滤**
    - 实时搜索：输入即时过滤，支持高亮匹配结果
    - 高级搜索：支持语法如 `category:工作 tag:重要` 的组合搜索
    - 快速筛选：预设筛选按钮（最近7天、最常访问、未分类等）
    - 搜索历史：保存常用搜索条件，支持快速应用
  - **HTML书签导入**
    - 文件选择：支持拖拽或点击选择bookmarks.html文件
    - 解析预览：显示解析结果（书签数量、分类结构、重复检测）
    - 分类映射：自动建议分类规则（基于文件夹结构、域名等）
    - 批量确认：预览导入内容，支持选择性导入
    - 冲突处理：重复书签的处理选项（跳过、覆盖、重命名）
- **快捷方式**
  - 拖拽排序、分组折叠、右键编辑/删除、批量导入
  - 图标自动抓取favicon，可自定义SVG/Emoji
- **卡片区**
  - 卡片化模块，支持尺寸与密度调整
  - 悬浮态显示更多信息（如天气小时预报）
  - 统一的卡片标题栏与动作区（刷新、置顶、隐藏）
- **个性化**
  - 实时预览主题与壁纸
  - 背景模糊/遮罩强度滑杆
  - 动画可开关（偏好低动效模式）
- **可用性**
  - 一致的快捷键（s聚焦搜索、/也可、?帮助）
  - 可选 Vim/Emacs 风格快捷键映射，支持自定义 Keymap、导入导出
  - 空态引导（首次进入时预设示例）
  - Undo/Redo（例如误删快捷方式）

## 5. 视觉设计
- **风格**
  - 极简、柔和阴影、圆角一致（8/12px）
  - 颜色体系：浅色与深色主题，支持动态色（跟随壁纸）
- **排版**
  - 字体：系统默认优先，提供等宽字体选项（JetBrains Mono、Fira Code）
  - 层次：标题16-20，正文14-16，说明12-13
- **组件**
  - 搜索框（大尺寸、圆角、投影、引擎Logo）
  - 卡片（统一内边距、悬浮态升起、骨架屏）
  - 网格（响应式：3/4/6列断点）
- **动效**
  - 200-250ms微动效，淡入/位移/缩放
  - 低性能模式：禁用高斯模糊与复杂阴影
  - 主题预设：终端风（暗色、低饱和、轻噪点）、极简风（高对比）

## 6.1 HTML书签导入技术方案
- **文件解析**
  - 支持标准Netscape书签格式（bookmarks.html）
  - DOM解析器处理HTML结构，提取书签和文件夹信息
  - 正则表达式匹配书签属性（HREF、ADD_DATE、ICON等）
- **数据处理**
  - 递归解析文件夹结构，构建分类树
  - URL验证和清理（移除无效字符、标准化协议）
  - 重复检测算法（基于URL和标题的相似度匹配）
- **智能分类**
  - 基于文件夹路径自动创建分类
  - 域名分析生成建议分类（如github.com → 开发工具）
  - 用户自定义分类映射规则
- **导入流程**
  - 文件选择 → 解析预览 → 分类映射 → 冲突处理 → 批量导入
  - 进度显示和错误处理
  - 导入日志和回滚机制

## 6. 技术方案（建议）
- **前端**
  - 框架：React/Vue/Svelte 任一（推荐 React + Vite + TypeScript）
  - 状态：Zustand/Redux Toolkit（轻量推荐 Zustand）
  - 样式：Tailwind CSS + CSS 变量主题；或 CSS-in-JS
  - 图标：Iconify/自用SVG Sprite
- **数据与持久化**
  - 本地：IndexedDB（Dexie）+ localStorage
  - 云同步（后续）：Supabase/Firebase/自建KV + OIDC
  - 导入导出：JSON 文件
  - 可选从 `.startpage.json`/YAML 读取配置，支持 Schema 校验（Zod）
- **API**
  - 天气：Open-Meteo/和风天气
  - 引语：Quotable/自建列表
  - RSS：客户端解析（Feed/Parser）或代理服务
- **平台**
  - 部署：静态托管（Vercel/Netlify/GitHub Pages）
  - 浏览器扩展模式：作为新标签页（后续）
  - PWA：离线与安装
 - **工程质量**
  - 代码规范：ESLint + Prettier + Husky（pre-commit 检查）
  - 测试：Vitest（单元）+ Playwright（E2E）
  - 模块化：卡片/数据源以插件化接口实现（后续演进）

## 7. 性能与质量
- **性能基线**
  - 首屏 < 1s（缓存命中），TTI < 2s
  - 资源分包与懒加载（设置面板、RSS模块延迟加载）
  - 图片压缩与本地缓存（壁纸）
- **可访问性**
  - 对比度合规、键盘可达、ARIA标签
  - 屏幕阅读器友好（重要文本的语义标记）
- **隐私**
  - 默认不上传任何数据；开关式同步
  - 第三方请求明确标注与可关闭
  - 遵循本地优先、最小化收集原则

## 8. 数据结构（草案）
- `settings`: 主题、壁纸、布局、引擎、开关
- `categories`: 分类树结构
  ```typescript
  interface Category {
    id: string;
    name: string;
    icon?: string;
    color?: string;
    parentId?: string; // 支持嵌套
    order: number;
    createdAt: Date;
    updatedAt: Date;
  }
  ```
- `shortcuts`: 标签数组
  ```typescript
  interface Shortcut {
    id: string;
    title: string;
    url: string;
    description?: string;
    icon?: string; // favicon URL 或自定义图标
    categoryId: string;
    tags: string[]; // 支持多标签
    order: number;
    pinned: boolean; // 置顶
    visitCount: number; // 访问统计
    lastVisited?: Date;
    createdAt: Date;
    updatedAt: Date;
  }
  ```
- `cards`: 数组（id、type、position、size、visible、config）
- `search`: 历史、别名/前缀规则、自定义引擎
- `integrations`: 天气/日历/RSS配置与缓存
- `backups`: 备份快照与版本
- `importHistory`: 导入记录（浏览器类型、导入时间、处理结果）
- `bookmarkImport`: HTML书签导入配置
  ```typescript
  interface BookmarkImportConfig {
    autoCreateCategories: boolean; // 自动创建分类
    categoryMapping: Record<string, string>; // 文件夹到分类的映射
    duplicateStrategy: 'skip' | 'overwrite' | 'rename'; // 重复处理策略
    faviconFetch: boolean; // 是否自动获取favicon
    tagGeneration: boolean; // 是否基于域名生成标签
  }
  ```

## 9. 安全与风险
- 第三方API速率/失效（需降级策略与缓存）
- 壁纸版权与跨域（采用可用授权源或本地图像）
- 扩展模式权限审查（最小权限）

## 10. 迭代路线图
- **v0.1 MVP：智能快捷导航核心**
  - 基础分类管理（创建、编辑、删除、拖拽排序）
  - 标签导入与展示（HTML书签文件导入、基础网格视图）
  - 搜索与过滤（实时搜索、基础筛选）
  - 主题与壁纸系统
  - 本地持久化
- **v0.2 导航增强**
  - 多层级分类（嵌套结构）
  - 多种视图模式（列表、紧凑视图）
  - 批量操作（多选、批量编辑）
  - 使用统计与智能排序
  - 高级搜索语法
  - HTML书签导入增强（智能分类映射、重复检测、批量预览）
- **v0.3 个性化与扩展**
  - 布局编辑器、卡片开关
  - 导入导出功能
  - 待办/番茄、RSS
  - 键盘启动器、PWA
- **v0.4 同步与协作**
  - 账号或匿名同步码
  - 多设备同步
- **v1.0 扩展生态**
  - 浏览器新标签页扩展发布
  - 插件系统

## 11. 成功指标（KPIs）
- **性能指标**
  - 首屏加载时间、静态资源包大小
  - 大量标签（1000+）的渲染性能
  - 搜索响应时间（<100ms）
- **使用指标**
  - 日活留存、功能使用率（搜索/快捷方式点击）
  - 分类使用率（用户创建和使用的分类数量）
  - **HTML书签导入成功率**（成功解析和导入的书签比例）
  - 批量操作使用率（多选、批量编辑功能使用频率）
- **个性化指标**
  - 个性化完成率（修改主题/布局）
  - 分类组织完成度（用户对标签的分类整理程度）
  - 自定义视图使用率（不同视图模式的使用偏好）
- **效率指标**
  - 键盘操作占比（≥ 90%）、命令面板调用次数、别名使用率
  - 平均访问时间（从打开页面到点击目标链接的时间）
  - 搜索命中率（用户通过搜索找到目标链接的比例）
- **质量指标**
  - 错误/故障率（API失败、渲染异常）
  - 数据丢失率（导入、同步过程中的数据丢失）
  - **HTML书签解析准确率**（正确解析书签标题、URL、分类的比例）

## 12. 未来可能性
- AI 搜索建议与摘要
- 日程与任务智能聚合
- 小组件社区与主题市场

如果你确认这份设计方向，我可以继续细化交互稿（关键界面的低保真原型）或输出技术实施清单与时间估算。


